// Code generated by github.com/99designs/gqlgen, DO NOT EDIT.

package db

import (
	"context"

	"github.com/fasibio/autogql_example/graph/model"
	"gorm.io/gorm"
)

type AutoGqlHookM interface {
	model.Company | model.Todo | model.User | model.Cat | model.CreditCard
}
type AutoGqlHookF interface {
	model.UserFiltersInput | model.CatFiltersInput | model.CreditCardFiltersInput | model.CompanyFiltersInput | model.TodoFiltersInput
}

type AutoGqlHookQueryO interface {
	model.CatOrder | model.CreditCardOrder | model.CompanyOrder | model.TodoOrder | model.UserOrder
}

type AutoGqlHookI interface {
	model.TodoInput | model.UserInput | model.CatInput | model.CreditCardInput | model.CompanyInput
}

type AutoGqlHookU interface {
	model.UpdateCompanyInput | model.UpdateTodoInput | model.UpdateUserInput | model.UpdateCatInput | model.UpdateCreditCardInput
}

type AutoGqlHookUP interface {
	model.UpdateUserPayload | model.UpdateCatPayload | model.UpdateCreditCardPayload | model.UpdateCompanyPayload | model.UpdateTodoPayload
}

type AutoGqlHookDP interface {
	model.DeleteCompanyPayload | model.DeleteTodoPayload | model.DeleteUserPayload | model.DeleteCatPayload | model.DeleteCreditCardPayload
}

type AutoGqlHookAP interface {
	model.AddTodoPayload | model.AddUserPayload | model.AddCatPayload | model.AddCreditCardPayload | model.AddCompanyPayload
}

type AutoGqlDB struct {
	Db    *gorm.DB
	Hooks map[string]any
}

func NewAutoGqlDB(db *gorm.DB) AutoGqlDB {
	return AutoGqlDB{
		Db:    db,
		Hooks: make(map[string]any),
	}
}

func (db *AutoGqlDB) Init() {
	db.Db.AutoMigrate(&model.Company{}, &model.Todo{}, &model.User{}, &model.Cat{}, &model.CreditCard{})
}

func AddGetHook[T AutoGqlHookM, I any](db *AutoGqlDB, name string, implementation AutoGqlHookGet[T, I]) {
	db.Hooks[name] = implementation
}

func AddQueryHook[M AutoGqlHookM, F AutoGqlHookF, O AutoGqlHookQueryO](db *AutoGqlDB, name string, implementation AutoGqlHookQuery[M, F, O]) {
	db.Hooks[name] = implementation
}

func AddAddHook[M AutoGqlHookM, I AutoGqlHookI, AP AutoGqlHookAP](db *AutoGqlDB, name string, implementation AutoGqlHookAdd[M, I, AP]) {
	db.Hooks[name] = implementation
}

func AddUpdateHook[M AutoGqlHookM, U AutoGqlHookU, UP AutoGqlHookUP](db *AutoGqlDB, name string, implementation AutoGqlHookUpdate[U, UP]) {
	db.Hooks[name] = implementation
}

func AddDeleteHook[M AutoGqlHookM, F AutoGqlHookF, DP AutoGqlHookDP](db *AutoGqlDB, name string, implementation AutoGqlHookDelete[M, F, DP]) {
	db.Hooks[name] = implementation
}

type AutoGqlHookGet[obj AutoGqlHookM, identifier any] interface {
	Received(ctx context.Context, dbHelper *AutoGqlDB, id ...identifier) (*gorm.DB, error)
	BeforeCallDb(ctx context.Context, db *gorm.DB) (*gorm.DB, error)
	AfterCallDb(ctx context.Context, data *obj) (*obj, error)
	BeforeReturn(ctx context.Context, data *obj, db *gorm.DB) (*obj, error)
}

type AutoGqlHookQuery[obj AutoGqlHookM, filter AutoGqlHookF, order AutoGqlHookQueryO] interface {
	Received(ctx context.Context, dbHelper *AutoGqlDB, filter *filter, order *order, first, offset *int) (*gorm.DB, *filter, *order, *int, *int, error)
	BeforeCallDb(ctx context.Context, db *gorm.DB) (*gorm.DB, error)
	AfterCallDb(ctx context.Context, data []*obj) ([]*obj, error)
	BeforeReturn(ctx context.Context, data []*obj, db *gorm.DB) ([]*obj, error)
}

type AutoGqlHookAdd[obj AutoGqlHookM, input AutoGqlHookI, res AutoGqlHookAP] interface {
	Received(ctx context.Context, dbHelper *AutoGqlDB, input []*input) (*gorm.DB, []*input, error)
	BeforeCallDb(ctx context.Context, db *gorm.DB, data []obj) (*gorm.DB, []obj, error)
	BeforeReturn(ctx context.Context, db *gorm.DB, res *res) (*res, error)
}

type AutoGqlHookUpdate[input AutoGqlHookU, res AutoGqlHookUP] interface {
	Received(ctx context.Context, dbHelper *AutoGqlDB, input *input) (*gorm.DB, input, error)
	BeforeCallDb(ctx context.Context, db *gorm.DB, data map[string]interface{}) (*gorm.DB, map[string]interface{}, error)
	BeforeReturn(ctx context.Context, db *gorm.DB, res *res) (*res, error)
}

type AutoGqlHookDelete[obj AutoGqlHookM, input AutoGqlHookF, res AutoGqlHookDP] interface {
	Received(ctx context.Context, dbHelper *AutoGqlDB, input *input) (*gorm.DB, input, error)
	BeforeCallDb(ctx context.Context, db *gorm.DB) (*gorm.DB, error)
	BeforeReturn(ctx context.Context, db *gorm.DB, res *res) (*res, error)
}
